﻿@using cloudscribe.Web.Navigation
@using System.Text
@model NavigationViewModel
@using Microsoft.Extensions.Localization
@inject IStringLocalizer<cloudscribe.Web.Navigation.MenuResources> sr
@addTagHelper *, Microsoft.AspNetCore.Mvc.TagHelpers

@if (await Model.HasVisibleChildren(Model.CurrentNode))
{
    <div class="row row-cols-1 row-cols-md-4 g-4 mb-4">
        @foreach (var node in Model.CurrentNode.Children)
        {
            if (!await Model.ShouldAllowView(node)) { continue; }

            if (!await Model.HasVisibleChildren(node))
            {
                <div class="col">
                    <div class="card h-100">
                        <div class="card-body d-flex flex-column justify-content-center text-center">
                            <a href="@Url.Content(Model.AdjustUrl(node))" style="text-decoration:none;">
                                <h4>
                                    @Html.Raw(Model.GetIcon(node.Value))
                                </h4>
                                <h4>
                                    @sr[Model.AdjustText(node)]
                                </h4>
                            </a>
                        </div>
                    </div>
                </div>
            }
            else
            {
                <div class="col">
                    <div class="card h-100">
                        <div class="card-body d-flex flex-column justify-content-center text-center">
                            <a href="@Url.Content(Model.AdjustUrl(node))" class="mb-2" style="text-decoration:none;">
                                <h4>
                                    @Html.Raw(Model.GetIcon(node.Value))
                                </h4>
                                <h4>
                                    @sr[Model.AdjustText(node)]
                                </h4>
                            </a>
                            @Model.UpdateTempNode(node) <partial name="Bs5SiteAdminMainChildPartial" model="@Model" />
                        </div>
                    </div>
                </div>
            }
        }
    </div>
}